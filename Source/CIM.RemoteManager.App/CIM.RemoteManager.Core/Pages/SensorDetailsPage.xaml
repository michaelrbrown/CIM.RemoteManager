<pages:BaseTabbedPage x:Class="CIM.RemoteManager.Core.Pages.SensorDetailsPage"
                      xmlns="http://xamarin.com/schemas/2014/forms" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                      xmlns:chart="clr-namespace:Telerik.XamarinForms.Chart;assembly=Telerik.XamarinForms.Chart" xmlns:pages="clr-namespace:CIM.RemoteManager.Core.Pages;assembly=CIM.RemoteManager.Core"
                      BackgroundColor="#FFFFFF">

    <pages:BasePage Title="Sensor Plot" BackgroundColor="#FFFFFF" Icon="ic_sensor-plot.png">

        <!-- Background -->
        <Image Aspect="AspectFill" RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent, Property=Height}" RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width}" Source="bgapplication.jpg" />

        <StackLayout Padding="10" HorizontalOptions="CenterAndExpand" BackgroundColor="#AE2C3B" IsVisible="{Binding IsStateOn, Converter={StaticResource BooleanToFalseConverter}}">
            <Grid HorizontalOptions="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Image VerticalOptions="Center" HorizontalOptions="End" Source="bluetooth-info.png" />
                <Label Grid.Column="1" VerticalOptions="Center" FontSize="18" Text="{Binding StateText}" TextColor="#FFFFFF" />
            </Grid>
        </StackLayout>

        <!-- Margin: left, top, right, bottom -->
        <Grid VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" BackgroundColor="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="80" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Margin: left, top, right, bottom -->
            <Grid Grid.Row="0" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand">

                <StackLayout Margin="10" VerticalOptions="Center" HorizontalOptions="Center" HeightRequest="50">
                    <Frame Margin="0" Padding="0" BackgroundColor="{DynamicResource AppAccentColor}" CornerRadius="15" IsClippedToBounds="True">
                        <Label Margin="10"
                               VerticalOptions="Center" HorizontalOptions="Center"
                               FontSize="18"
                               Text="{Binding SensorName}"
                               TextColor="#FFFFFF" />
                    </Frame>
                </StackLayout>

            </Grid>

            <chart:RadCartesianChart Grid.Row="1" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" BackgroundColor="#FFFFFF">
                <chart:RadCartesianChart.HorizontalAxis>
                    <chart:CategoricalAxis />
                </chart:RadCartesianChart.HorizontalAxis>
                <chart:RadCartesianChart.VerticalAxis>
                    <chart:NumericalAxis />
                </chart:RadCartesianChart.VerticalAxis>
                <chart:RadCartesianChart.Series>
                    <chart:AreaSeries ItemsSource="{Binding SensorPlotCollection}">
                        <chart:AreaSeries.ValueBinding>
                            <chart:PropertyNameDataPointBinding PropertyName="CurrentValue" />
                        </chart:AreaSeries.ValueBinding>
                        <chart:AreaSeries.CategoryBinding>
                            <chart:PropertyNameDataPointBinding PropertyName="DateTimeStamp" />
                        </chart:AreaSeries.CategoryBinding>
                    </chart:AreaSeries>
                </chart:RadCartesianChart.Series>
            </chart:RadCartesianChart>

        </Grid>

    </pages:BasePage>

    <pages:BasePage Title="Sensor Statistics" BackgroundColor="#FFFFFF" Icon="ic_sensor-statistics.png">

        <!-- Margin: left, top, right, bottom -->
        <Grid VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" BackgroundColor="Transparent">

            <Grid.RowDefinitions>
                <RowDefinition Height="80" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Margin: left, top, right, bottom -->
            <Grid Grid.Row="0" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand">

                <StackLayout Margin="10" VerticalOptions="Center" HorizontalOptions="Center" HeightRequest="50">
                    <Frame Margin="0" Padding="0" BackgroundColor="{DynamicResource AppAccentColor}" CornerRadius="15" IsClippedToBounds="True">
                        <Label Margin="10"
                               VerticalOptions="Center" HorizontalOptions="Center"
                               FontSize="18"
                               Text="{Binding SensorName}"
                               TextColor="#FFFFFF" />
                    </Frame>
                </StackLayout>

            </Grid>

            <!-- Grid layout for Statistics form -->
            <Grid Grid.Row="1" Margin="20,10,20,20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Average -->
                <Label Grid.Row="0" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Average: " />
                <Entry Grid.Row="0" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding AverageValue}" />

                <!-- Average Since -->
                <Label Grid.Row="1" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Since: " />
                <Entry Grid.Row="1" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding SinceDateTimeStamp}" />

                <!-- Minimum -->
                <Label Grid.Row="2" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Minimum: " />
                <Entry Grid.Row="2" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding MinimumValue}" />

                <!-- Minimum Occurrence -->
                <Label Grid.Row="3" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Occurrence: " />
                <Entry Grid.Row="3" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding MinimumOccuranceTimeStamp}" />

                <!-- Maximum -->
                <Label Grid.Row="4" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Maximum: " />
                <Entry Grid.Row="4" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding MaximumValue}" />

                <!-- Maximum Occurrence -->
                <Label Grid.Row="5" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Occurrence: " />
                <Entry Grid.Row="5" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding MaximumOccuranceTimeStamp}" />

                <!-- Variance -->
                <Label Grid.Row="6" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Variance: " />
                <Entry Grid.Row="6" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding VarianceValue}" />

                <!-- Margin: left, top, right, bottom -->
                <StackLayout Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2"
                             VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand"
                             BackgroundColor="{DynamicResource RemoteNameBackgroundColor}"
                             HeightRequest="60" Opacity=".6" Orientation="Horizontal" Spacing="0">
                    <Label Margin="5"
                           VerticalOptions="CenterAndExpand" HorizontalOptions="StartAndExpand"
                           FontSize="16" LineBreakMode="MiddleTruncation"
                           Text="{Binding CharacteristicValue, StringFormat=' Incoming Value: {0:N}'}"
                           TextColor="{DynamicResource AppLightColor}"
                           VerticalTextAlignment="Center" />
                </StackLayout>

            </Grid>

        </Grid>

    </pages:BasePage>

    <pages:BasePage Title="Sensor Limits" BackgroundColor="#FFFFFF" Icon="ic_sensor-limits.png">

        <!-- Margin: left, top, right, bottom -->
        <Grid VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" BackgroundColor="Transparent">

            <Grid.RowDefinitions>
                <RowDefinition Height="80" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Margin: left, top, right, bottom -->
            <Grid Grid.Row="0" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand">

                <StackLayout Margin="10" VerticalOptions="Center" HorizontalOptions="Center" HeightRequest="50">
                    <Frame Margin="0" Padding="0" BackgroundColor="{DynamicResource AppAccentColor}" CornerRadius="15" IsClippedToBounds="True">
                        <Label Margin="10"
                               VerticalOptions="Center" HorizontalOptions="Center"
                               FontSize="18"
                               Text="{Binding SensorName}"
                               TextColor="#FFFFFF" />
                    </Frame>
                </StackLayout>

            </Grid>

            <!-- Grid layout for Limits form -->
            <Grid Grid.Row="1" Margin="20,10,20,20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Alarms Active -->
                <Label Grid.Row="0" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Alarms Active: " />
                <Entry Grid.Row="0" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding AlarmStatusBool}" />

                <!-- Alarm Delay -->
                <Label Grid.Row="1" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Alarm Delay: " />
                <Entry Grid.Row="1" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding AlarmDelay}" />

                <!-- High Alarm -->
                <Label Grid.Row="2" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="High Alarm: " />
                <Entry Grid.Row="2" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding HighAlarmLimit}" />

                <!-- High Warning -->
                <Label Grid.Row="3" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="High Warning: " />
                <Entry Grid.Row="3" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding HighWarningLimit}" />

                <!-- Low Warning -->
                <Label Grid.Row="4" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Low Warning: " />
                <Entry Grid.Row="4" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding LowAlarmLimit}" />

                <!-- Low Alarm -->
                <Label Grid.Row="5" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Low Alarm: " />
                <Entry Grid.Row="5" Grid.Column="1" IsEnabled="False" Style="{DynamicResource FormValueStyle}" Text="{Binding LowWarningLimit}" />

                <!-- Margin: left, top, right, bottom -->
                <StackLayout Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2"
                             VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand"
                             BackgroundColor="{DynamicResource RemoteNameBackgroundColor}"
                             HeightRequest="60" Opacity=".6" Orientation="Horizontal" Spacing="0">
                    <Label Margin="5"
                           VerticalOptions="CenterAndExpand" HorizontalOptions="StartAndExpand"
                           FontSize="16" LineBreakMode="MiddleTruncation"
                           Text="{Binding CharacteristicValue, StringFormat=' Incoming Value: {0:N}'}"
                           TextColor="{DynamicResource AppLightColor}"
                           VerticalTextAlignment="Center" />
                </StackLayout>

            </Grid>

        </Grid>

    </pages:BasePage>

    <pages:BasePage Title="Sensor Setup" BackgroundColor="#FFFFFF" Icon="ic_sensor-settings.png">

        <!-- Margin: left, top, right, bottom -->
        <Grid VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" BackgroundColor="Transparent">

            <Grid.RowDefinitions>
                <RowDefinition Height="80" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Margin: left, top, right, bottom -->
            <Grid Grid.Row="0" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand">

                <StackLayout Margin="10" VerticalOptions="Center" HorizontalOptions="Center" HeightRequest="50">
                    <Frame Margin="0" Padding="0" BackgroundColor="{DynamicResource AppAccentColor}" CornerRadius="15" IsClippedToBounds="True">
                        <Label Margin="10"
                               VerticalOptions="Center" HorizontalOptions="Center"
                               FontSize="18"
                               Text="{Binding SensorName}"
                               TextColor="#FFFFFF" />
                    </Frame>
                </StackLayout>

            </Grid>

            <!-- Grid layout for Limits form -->
            <Grid Grid.Row="1" Margin="20,10,20,20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Upper Calibration -->
                <Label Grid.Row="0" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Upper Calibration: " />
                <Entry Grid.Row="0" Grid.Column="1" Style="{DynamicResource FormValueStyle}" Text="{Binding AlarmStatusBool}" />

                <!-- Upper Calibration Target -->
                <Label Grid.Row="0" Grid.Column="2" Style="{DynamicResource FormLabelStyle}" Text="Target: " />
                <Entry Grid.Row="0" Grid.Column="3" Style="{DynamicResource FormValueStyle}" Text="{Binding AlarmDelay}" />

                <!-- Upper Calibration -->
                <Label Grid.Row="1" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Lower Calibration: " />
                <Entry Grid.Row="1" Grid.Column="1" Style="{DynamicResource FormValueStyle}" Text="{Binding AlarmStatusBool}" />

                <!-- Lower Calibration Target -->
                <Label Grid.Row="1" Grid.Column="2" Style="{DynamicResource FormLabelStyle}" Text="Target: " />
                <Entry x:Name="LowerCalibrationEntry" Grid.Row="1" Grid.Column="3" Style="{DynamicResource FormValueStyle}" Text="{Binding AlarmDelay}" />

                <!-- Scale -->
                <Label Grid.Row="2" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Scale: " />
                <Entry x:Name="ScaleEntry"
                       Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"
                       Style="{DynamicResource FormValueStyle}"
                       Text="{Binding HighAlarmLimit}" />

                <!-- Offset -->
                <Label Grid.Row="3" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Offset: " />
                <Entry x:Name="OffsetEntry" Grid.Row="3" Grid.Column="1" Style="{DynamicResource FormValueStyle}" Text="{Binding HighWarningLimit}" />

                <!-- Offset Trim -->
                <Label Grid.Row="4" Grid.Column="2" Style="{DynamicResource FormLabelStyle}" Text="Offset Trim: " />
                <Switch Grid.Row="4" Grid.Column="3"
                        Margin="5"
                        VerticalOptions="Center" HorizontalOptions="Center"
                        Toggled="SensorOffsetTrimSwitchToggled" />

                <!-- Output -->
                <Label Grid.Row="5" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Output: " />
                <Entry Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="3" Style="{DynamicResource FormValueStyle}" Text="{Binding LowAlarmLimit}" />

                <!-- Input -->
                <Label Grid.Row="6" Grid.Column="0" Style="{DynamicResource FormLabelStyle}" Text="Input: " />
                <Entry Grid.Row="6" Grid.Column="1" Grid.ColumnSpan="3" Style="{DynamicResource FormValueStyle}" Text="{Binding LowWarningLimit}" />

                <!-- Margin: left, top, right, bottom -->
                <StackLayout Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2"
                             VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand"
                             BackgroundColor="{DynamicResource RemoteNameBackgroundColor}"
                             HeightRequest="60" Opacity=".6" Orientation="Horizontal" Spacing="0">
                    <Label Margin="5"
                           VerticalOptions="CenterAndExpand" HorizontalOptions="StartAndExpand"
                           FontSize="16" LineBreakMode="MiddleTruncation"
                           Text="{Binding CharacteristicValue, StringFormat=' Incoming Value: {0:N}'}"
                           TextColor="{DynamicResource AppLightColor}"
                           VerticalTextAlignment="Center" />
                </StackLayout>

            </Grid>

        </Grid>

    </pages:BasePage>

</pages:BaseTabbedPage>