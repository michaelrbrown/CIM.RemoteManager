<pages:BaseTabbedPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:chart="clr-namespace:Telerik.XamarinForms.Chart;assembly=Telerik.XamarinForms.Chart"
             xmlns:pages="clr-namespace:CIM.RemoteManager.Core.Pages;assembly=CIM.RemoteManager.Core"
             xmlns:models="clr-namespace:CIM.RemoteManager.Core.Models;assembly=CIM.RemoteManager.Core"
             x:Class="CIM.RemoteManager.Core.Pages.SensorDetailsPage" 
             BackgroundColor="#FFFFFF">


    <pages:BasePage Title="Sensor Plot" BackgroundColor="#FFFFFF" Icon="ic_sensor-plot.png">
        <!-- Background -->
        <Image
            Aspect="AspectFill"
            RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width}"
            RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent, Property=Height}" 
            Source="bgapplication.jpg">
        </Image>

        <StackLayout BackgroundColor="#AE2C3B" Padding="10" HorizontalOptions="CenterAndExpand" IsVisible="{Binding IsStateOn, Converter={StaticResource BooleanToFalseConverter}}">
            <Grid HorizontalOptions="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Image Source="bluetooth-info.png" VerticalOptions="Center" HorizontalOptions="End" />
                <Label Grid.Column="1" Text="{Binding StateText}" TextColor="#FFFFFF" FontSize="18" VerticalOptions="Center"/>
            </Grid>
        </StackLayout>

        <!-- Margin: left, top, right, bottom -->
        <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" BackgroundColor="Transparent">

            <Grid.RowDefinitions>
                <RowDefinition Height="120"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>

            <!-- Margin: left, top, right, bottom -->
            <Grid Grid.Row="0" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" BackgroundColor="#003366">

                <Grid.RowDefinitions>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="40"></RowDefinition>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackLayout Grid.Row="0" Grid.Column="0" Orientation="Vertical" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" Spacing="0">
                    <Label Text="{Binding UpdateButtonText, Mode=TwoWay}" TextColor="{DynamicResource AppLightColor}" HorizontalOptions="Center" VerticalOptions="Center" />
                    <Switch IsToggled="{Binding UpdatesStarted, Mode=TwoWay}" Toggled="SensorUpdatesSwitchToggled" Margin="5" HorizontalOptions="Center" VerticalOptions="Center" />
                </StackLayout>

                <Image Grid.Row="0" Grid.Column="1" Source="remote512.png" Margin="10" HeightRequest="120" WidthRequest="120" Aspect="AspectFit" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" />

                <StackLayout Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Spacing="0" Orientation="Horizontal" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" HeightRequest="40" BackgroundColor="{DynamicResource RemoteNameBackgroundColor}">
                    <Label Text="{Binding SensorSerialNumber}" TextColor="{DynamicResource AppLightColor}" FontSize="20" HorizontalOptions="CenterAndExpand" VerticalOptions="Center" />
                </StackLayout>

            </Grid>

            <chart:RadCartesianChart BackgroundColor="#FFFFFF" Grid.Row="1" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                <chart:RadCartesianChart.HorizontalAxis>
                    <chart:CategoricalAxis/>
                </chart:RadCartesianChart.HorizontalAxis>
                <chart:RadCartesianChart.VerticalAxis>
                    <chart:NumericalAxis/>
                </chart:RadCartesianChart.VerticalAxis>
                <chart:RadCartesianChart.Series>
                    <chart:AreaSeries ItemsSource="{Binding SensorPlotCollection}">
                        <chart:AreaSeries.ValueBinding>
                            <chart:PropertyNameDataPointBinding PropertyName="CurrentValue"/>
                        </chart:AreaSeries.ValueBinding>
                        <chart:AreaSeries.CategoryBinding>
                            <chart:PropertyNameDataPointBinding PropertyName="DateTimeStamp"/>
                        </chart:AreaSeries.CategoryBinding>
                    </chart:AreaSeries>
                </chart:RadCartesianChart.Series>
            </chart:RadCartesianChart>

        </Grid>

    </pages:BasePage>

    <pages:BasePage Title="Sensor Statistics" BackgroundColor="#FFFFFF" Icon="ic_sensor-statistics.png">

        <ContentPage.Resources>
            <ResourceDictionary>
                <Style x:Key="FormLabelStyle" TargetType="Label">
                    <Setter Property="FontSize" Value="18"/>
                    <Setter Property="TextColor" Value="#444444"/>
                    <Setter Property="FontAttributes" Value="Bold"/>
                    <Setter Property="HorizontalTextAlignment" Value="End"></Setter>
                    <Setter Property="VerticalTextAlignment" Value="Center"></Setter>
                </Style>

                <Style x:Key="FormValueStyle" TargetType="Entry">
                    <Setter Property="FontSize" Value="18"/>
                    <Setter Property="TextColor" Value="#444444"/>
                    <Setter Property="FontAttributes" Value="Bold"/>
                    <Setter Property="HorizontalTextAlignment" Value="Start"></Setter>
                    <Setter Property="VerticalOptions" Value="Center"></Setter>
                </Style>
            </ResourceDictionary>
        </ContentPage.Resources>

        <!-- Margin: left, top, right, bottom -->
        <!-- Grid layout for Statistics form -->
        <Grid Margin="20,60,20,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Average -->
            <Label Grid.Row="0" Grid.Column="0" Text="Average: " Style="{DynamicResource FormLabelStyle}" />
            <Entry Grid.Row="0" Grid.Column="1" Text="{Binding AverageValue}" IsEnabled="False" Style="{DynamicResource FormValueStyle}" />

            <!-- Average Since -->
            <Label Grid.Row="1" Grid.Column="0" Text="Since: " Style="{DynamicResource FormLabelStyle}" />
            <Entry Grid.Row="1" Grid.Column="1" Text="{Binding SinceDateTimeStamp}" IsEnabled="False" Style="{DynamicResource FormValueStyle}" />

            <!-- Minimum -->
            <Label Grid.Row="2" Grid.Column="0" Text="Minimum: " Style="{DynamicResource FormLabelStyle}" />
            <Entry Grid.Row="2" Grid.Column="1" Text="{Binding MinimumValue}" IsEnabled="False" Style="{DynamicResource FormValueStyle}" />

            <!-- Minimum Occurrence -->
            <Label Grid.Row="3" Grid.Column="0" Text="Occurrence: " Style="{DynamicResource FormLabelStyle}" />
            <Entry Grid.Row="3" Grid.Column="1" Text="{Binding MinimumOccuranceTimeStamp}" IsEnabled="False" Style="{DynamicResource FormValueStyle}" />

            <!-- Maximum -->
            <Label Grid.Row="4" Grid.Column="0" Text="Maximum: " Style="{DynamicResource FormLabelStyle}" />
            <Entry Grid.Row="4" Grid.Column="1" Text="{Binding MaximumValue}" IsEnabled="False" Style="{DynamicResource FormValueStyle}" />

            <!-- Maximum Occurrence -->
            <Label Grid.Row="5" Grid.Column="0" Text="Occurrence: " Style="{DynamicResource FormLabelStyle}"/>
            <Entry Grid.Row="5" Grid.Column="1" Text="{Binding MaximumOccuranceTimeStamp}" IsEnabled="False" Style="{DynamicResource FormValueStyle}" />

            <!-- Variance -->
            <Label Grid.Row="6" Grid.Column="0" Text="Variance: " Style="{DynamicResource FormLabelStyle}" />
            <Entry Grid.Row="6" Grid.Column="1" Text="{Binding VarianceValue}" IsEnabled="False" Style="{DynamicResource FormValueStyle}" />

            <!-- Margin: left, top, right, bottom -->
            <StackLayout Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2" Spacing="0" Orientation="Horizontal" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" HeightRequest="60" BackgroundColor="{DynamicResource RemoteNameBackgroundColor}" Opacity=".6">
                <Label Text="{Binding CharacteristicValue, StringFormat=' Incoming Value: {0:N}'}" TextColor="{DynamicResource AppLightColor}" FontSize="16" Margin="5"  HorizontalOptions="StartAndExpand" VerticalOptions="CenterAndExpand" VerticalTextAlignment="Center" LineBreakMode="MiddleTruncation" />
            </StackLayout>

        </Grid>

    </pages:BasePage>

    <pages:BasePage Title="Sensor Limits" BackgroundColor="#FFFFFF" Icon="ic_sensor-limits.png">

            <ContentPage.Resources>
                <ResourceDictionary>
                    <Style x:Key="FormLabelStyle" TargetType="Label">
                        <Setter Property="FontSize" Value="18"/>
                        <Setter Property="TextColor" Value="#444444"/>
                        <Setter Property="FontAttributes" Value="Bold"/>
                        <Setter Property="HorizontalTextAlignment" Value="End"></Setter>
                        <Setter Property="VerticalTextAlignment" Value="Center"></Setter>
                    </Style>

                    <Style x:Key="FormValueStyle" TargetType="Entry">
                        <Setter Property="FontSize" Value="18"/>
                        <Setter Property="TextColor" Value="#444444"/>
                        <Setter Property="FontAttributes" Value="Bold"/>
                        <Setter Property="HorizontalTextAlignment" Value="Start"></Setter>
                        <Setter Property="VerticalOptions" Value="Center"></Setter>
                    </Style>
                </ResourceDictionary>
            </ContentPage.Resources>

            <!-- Margin: left, top, right, bottom -->
            <!-- Grid layout for Statistics form -->
            <Grid Margin="20,60,20,20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="50" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

              
                <!-- Margin: left, top, right, bottom -->
                <StackLayout Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2" Spacing="0" Orientation="Horizontal" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" HeightRequest="60" BackgroundColor="{DynamicResource RemoteNameBackgroundColor}" Opacity=".6">
                    <Label Text="{Binding CharacteristicValue, StringFormat=' Incoming Value: {0:N}'}" TextColor="{DynamicResource AppLightColor}" FontSize="16" Margin="5"  HorizontalOptions="StartAndExpand" VerticalOptions="CenterAndExpand" VerticalTextAlignment="Center" LineBreakMode="MiddleTruncation" />
                </StackLayout>

            </Grid>

        </pages:BasePage>
    
</pages:BaseTabbedPage>