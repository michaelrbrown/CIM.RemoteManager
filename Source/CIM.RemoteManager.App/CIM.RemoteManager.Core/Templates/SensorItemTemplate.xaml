<?xml version="1.0" encoding="UTF-8" ?>
<ContentView x:Class="CIM.RemoteManager.Core.Templates.SensorItemTemplate" xmlns="http://xamarin.com/schemas/2014/forms" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <ContentView.Content>

        <StackLayout Margin="0" Padding="0" Opacity=".95" Spacing="0">

            <Grid BackgroundColor="{Binding AlarmStatus, Converter={StaticResource AlarmStatusColorConverter}}" ColumnSpacing="0">

                <StackLayout Margin="0" Padding="0" Opacity="1" Spacing="0">

                    <Grid Style="{DynamicResource CardStyle}">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="75" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="130" />
                            <ColumnDefinition Width="5" />
                        </Grid.ColumnDefinitions>

                        <!-- Margin: left, top, right, bottom -->
                        <Image Grid.Column="0" Aspect="AspectFit" Scale="1" Source="{Binding SensorImage}" />

                        <StackLayout Grid.Column="1" VerticalOptions="Center" HeightRequest="100" Spacing="0">
                            <Label VerticalOptions="Center" LineBreakMode="TailTruncation" Style="{DynamicResource NameStyle}" Text="{Binding Name}" />
                            <Label VerticalOptions="Center" LineBreakMode="TailTruncation" Style="{DynamicResource SensorTypeStyle}" Text="{Binding SensorLabel}" />
                            <Label VerticalOptions="Center" LineBreakMode="TailTruncation" Style="{DynamicResource TimeStampStyle}" Text="{Binding DateTimeStamp, StringFormat='{}{0:hh\\:mm\\:ss tt}'}" />
                        </StackLayout>

                        <StackLayout Grid.Column="2" Orientation="Horizontal" Spacing="0">
                            <Frame VerticalOptions="CenterAndExpand" HorizontalOptions="CenterAndExpand"
                                   CornerRadius="20" HasShadow="False" HeightRequest="35" Opacity="1"
                                   OutlineColor="{Binding AlarmStatus, Converter={StaticResource AlarmStatusColorConverter}}"
                                   Style="{DynamicResource ValueBoxStyle}"
                                   WidthRequest="130">
                                <StackLayout VerticalOptions="CenterAndExpand" HorizontalOptions="CenterAndExpand" Orientation="Horizontal" Spacing="0">
                                    <Label Margin="0"
                                           VerticalOptions="CenterAndExpand" HorizontalOptions="End"
                                           HorizontalTextAlignment="End" LineBreakMode="NoWrap"
                                           Style="{DynamicResource ValueStyle}"
                                           Text="{Binding AverageValue, Converter={StaticResource SensorValueValidationConverter}}"
                                           VerticalTextAlignment="Center" />
                                    <Label Margin="0,-20,0,0"
                                           VerticalOptions="CenterAndExpand" HorizontalOptions="Start"
                                           HorizontalTextAlignment="Start" LineBreakMode="NoWrap"
                                           Style="{DynamicResource ValueUnitTypeStyle}"
                                           Text="{Binding SensorUnitType}"
                                           VerticalTextAlignment="Start" />
                                </StackLayout>
                            </Frame>
                        </StackLayout>

                    </Grid>

                    <BoxView Style="{DynamicResource LightShadowStyle}" />

                    <Grid Style="{DynamicResource Footer}">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <StackLayout Grid.Column="0" Spacing="0">
                            <Label HorizontalTextAlignment="Start" LineBreakMode="TailTruncation" Style="{DynamicResource SerialNumberStyle}" Text="{Binding SerialNumber}" />
                        </StackLayout>

                        <StackLayout Grid.Column="1" Spacing="0">
                            <Label HorizontalTextAlignment="Start" LineBreakMode="NoWrap" Style="{DynamicResource SensorIndexStyle}" Text="{Binding SensorIndex}" />
                        </StackLayout>

                    </Grid>

                </StackLayout>

            </Grid>

        </StackLayout>

    </ContentView.Content>

</ContentView>